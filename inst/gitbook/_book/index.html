<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Specific examples</title>
  <meta name="description" content="treats R package manual" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Specific examples" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="treats R package manual" />
  <meta name="github-repo" content="TGuillerme/treats" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Specific examples" />
  
  <meta name="twitter:description" content="treats R package manual" />
  

<meta name="author" content="Thomas Guillerme (guillert@tcd.ie)" />


<meta name="date" content="2023-03-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="gettingstarted.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/rglWebGL-binding-1.1.3/rglWebGL.js"></script>
<link href="libs/rglwidgetClass-1.1.3/rgl.css" rel="stylesheet" />
<script src="libs/rglwidgetClass-1.1.3/rglClass.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/utils.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/buffer.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/subscenes.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/shaders.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/shadersrc.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/textures.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/projection.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/mouse.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/init.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/pieces.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/draw.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/controls.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/selection.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/rglTimer.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/pretty.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/axes.src.js"></script>
<script src="libs/rglwidgetClass-1.1.3/animation.src.js"></script>
<script src="libs/CanvasMatrix4-1.1.3/CanvasMatrix.src.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">treats manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> <code>treats</code>: disparity and diversity simulations.</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#what-is-treats"><i class="fa fa-check"></i><b>1.1</b> What is <code>treats</code>?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#modular"><i class="fa fa-check"></i><b>1.1.1</b> Modular?</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#who-is-this-manual-for"><i class="fa fa-check"></i><b>1.2</b> Who is this manual for?</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#installing-and-running-the-package"><i class="fa fa-check"></i><b>1.3</b> Installing and running the package</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#help"><i class="fa fa-check"></i><b>1.4</b> Help</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#how-does-treats-work"><i class="fa fa-check"></i><b>1.5</b> How does <code>treats</code> work?</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#bdalgorithm"><i class="fa fa-check"></i><b>1.6</b> The birth-death algorithm</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="gettingstarted.html"><a href="gettingstarted.html"><i class="fa fa-check"></i><b>2</b> Getting started</a>
<ul>
<li class="chapter" data-level="2.1" data-path="gettingstarted.html"><a href="gettingstarted.html#the-simplest-of-all-analysis-simulating-diversity-only"><i class="fa fa-check"></i><b>2.1</b> The simplest of all analysis: simulating diversity only</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="gettingstarted.html"><a href="gettingstarted.html#changing-the-birth-death-parameters"><i class="fa fa-check"></i><b>2.1.1</b> Changing the birth-death parameters</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="gettingstarted.html"><a href="gettingstarted.html#slightly-more-complex-simulating-disparity-and-diversity"><i class="fa fa-check"></i><b>2.2</b> Slightly more complex: simulating disparity and diversity</a></li>
<li class="chapter" data-level="2.3" data-path="gettingstarted.html"><a href="gettingstarted.html#slightly-more-more-complex-simulating-linked-disparity-and-diversity"><i class="fa fa-check"></i><b>2.3</b> Slightly more more complex: simulating linked disparity and diversity</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="maketraits.html"><a href="maketraits.html"><i class="fa fa-check"></i><b>3</b> Simulating traits</a>
<ul>
<li class="chapter" data-level="3.1" data-path="maketraits.html"><a href="maketraits.html#the-process-process"><i class="fa fa-check"></i><b>3.1</b> The process (<code>process</code>)</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="maketraits.html"><a href="maketraits.html#the-syntax-how-to-code-a-process"><i class="fa fa-check"></i><b>3.1.1</b> The syntax (how to code a process?)</a></li>
<li class="chapter" data-level="3.1.2" data-path="maketraits.html"><a href="maketraits.html#using-a-process-in-treats"><i class="fa fa-check"></i><b>3.1.2</b> Using a <code>"process"</code> in <code>treats</code></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="maketraits.html"><a href="maketraits.html#the-number-of-traits-n-and-the-starting-values-start"><i class="fa fa-check"></i><b>3.2</b> The number of traits <code>n</code> and the starting values <code>start</code></a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="maketraits.html"><a href="maketraits.html#what-even-is-a-trait"><i class="fa fa-check"></i><b>3.2.1</b> What even is a trait?</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="maketraits.html"><a href="maketraits.html#extra-argument-for-the-processes-with-process.args"><i class="fa fa-check"></i><b>3.3</b> Extra argument for the processes with <code>process.args</code></a></li>
<li class="chapter" data-level="3.4" data-path="maketraits.html"><a href="maketraits.html#naming-the-traits-with-trait.names"><i class="fa fa-check"></i><b>3.4</b> Naming the traits with <code>trait.names</code></a></li>
<li class="chapter" data-level="3.5" data-path="maketraits.html"><a href="maketraits.html#combining-multiple-traits-with-add"><i class="fa fa-check"></i><b>3.5</b> Combining multiple traits with <code>add</code></a></li>
<li class="chapter" data-level="3.6" data-path="maketraits.html"><a href="maketraits.html#using-a-background-trait"><i class="fa fa-check"></i><b>3.6</b> Using a background trait</a></li>
<li class="chapter" data-level="3.7" data-path="maketraits.html"><a href="maketraits.html#saving-trait-values-at-different-time-steps"><i class="fa fa-check"></i><b>3.7</b> Saving trait values at different time steps</a></li>
<li class="chapter" data-level="3.8" data-path="maketraits.html"><a href="maketraits.html#traits-implemented-in-treats"><i class="fa fa-check"></i><b>3.8</b> Traits implemented in <code>treats</code></a></li>
<li class="chapter" data-level="3.9" data-path="maketraits.html"><a href="maketraits.html#testing-the-traits-with-test"><i class="fa fa-check"></i><b>3.9</b> Testing the traits with <code>test</code></a></li>
<li class="chapter" data-level="3.10" data-path="maketraits.html"><a href="maketraits.html#templates-for-making-your-very-own-process"><i class="fa fa-check"></i><b>3.10</b> Templates for making your very own process</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="maketraits.html"><a href="maketraits.html#a-simple-brownian-motion-process-template"><i class="fa fa-check"></i><b>3.10.1</b> A simple Brownian Motion process template</a></li>
<li class="chapter" data-level="3.10.2" data-path="maketraits.html"><a href="maketraits.html#a-simple-ornstein-uhlenbeck-process-template"><i class="fa fa-check"></i><b>3.10.2</b> A simple Ornstein-Uhlenbeck process template</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="makemodifiers.html"><a href="makemodifiers.html"><i class="fa fa-check"></i><b>4</b> Modifying the birth-death process</a>
<ul>
<li class="chapter" data-level="4.1" data-path="makemodifiers.html"><a href="makemodifiers.html#the-default-modifier-how-the-process-is-working"><i class="fa fa-check"></i><b>4.1</b> The default modifier (how the process is working)</a></li>
<li class="chapter" data-level="4.2" data-path="makemodifiers.html"><a href="makemodifiers.html#the-branch-length-function-branch.length"><i class="fa fa-check"></i><b>4.2</b> The branch length function (<code>branch.length</code>)</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="makemodifiers.html"><a href="makemodifiers.html#allowarguments"><i class="fa fa-check"></i><b>4.2.1</b> The allowed arguments</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="makemodifiers.html"><a href="makemodifiers.html#the-selection-function-selection"><i class="fa fa-check"></i><b>4.3</b> The selection function (<code>selection</code>)</a></li>
<li class="chapter" data-level="4.4" data-path="makemodifiers.html"><a href="makemodifiers.html#the-speciation-function-speciation"><i class="fa fa-check"></i><b>4.4</b> The speciation function (<code>speciation</code>)</a></li>
<li class="chapter" data-level="4.5" data-path="makemodifiers.html"><a href="makemodifiers.html#summarymodifiers"><i class="fa fa-check"></i><b>4.5</b> Summary of the inputs and outputs for the <code>branch.length</code>, <code>selection</code> and <code>speciation</code> modifiers</a></li>
<li class="chapter" data-level="4.6" data-path="makemodifiers.html"><a href="makemodifiers.html#the-condition-and-modify-functions-condition-and-modify"><i class="fa fa-check"></i><b>4.6</b> The condition and modify functions (<code>condition</code> and <code>modify</code>)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="makeevents.html"><a href="makeevents.html"><i class="fa fa-check"></i><b>5</b> Adding events to simulations</a>
<ul>
<li class="chapter" data-level="5.1" data-path="makeevents.html"><a href="makeevents.html#target"><i class="fa fa-check"></i><b>5.1</b> Target</a></li>
<li class="chapter" data-level="5.2" data-path="makeevents.html"><a href="makeevents.html#conditions"><i class="fa fa-check"></i><b>5.2</b> Conditions</a></li>
<li class="chapter" data-level="5.3" data-path="makeevents.html"><a href="makeevents.html#modifications"><i class="fa fa-check"></i><b>5.3</b> Modifications</a></li>
<li class="chapter" data-level="5.4" data-path="makeevents.html"><a href="makeevents.html#examples"><i class="fa fa-check"></i><b>5.4</b> Examples</a></li>
<li class="chapter" data-level="5.5" data-path="makeevents.html"><a href="makeevents.html#founding"><i class="fa fa-check"></i><b>5.5</b> Founding events</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="others.html"><a href="others.html"><i class="fa fa-check"></i><b>6</b> Other functionalities</a>
<ul>
<li class="chapter" data-level="6.1" data-path="others.html"><a href="others.html#makebdparams"><i class="fa fa-check"></i><b>6.1</b> <code>make.bd.params</code></a></li>
<li class="chapter" data-level="6.2" data-path="others.html"><a href="others.html#dropthings"><i class="fa fa-check"></i><b>6.2</b> <code>drop.things</code></a></li>
<li class="chapter" data-level="6.3" data-path="others.html"><a href="others.html#treats-internal-utilities"><i class="fa fa-check"></i><b>6.3</b> <code>"treats"</code> internal utilities</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="plotting-traits.html"><a href="plotting-traits.html"><i class="fa fa-check"></i><b>7</b> Plotting traits</a></li>
<li class="chapter" data-level="8" data-path="plotting-treats-results.html"><a href="plotting-treats-results.html"><i class="fa fa-check"></i><b>8</b> Plotting treats results</a>
<ul>
<li class="chapter" data-level="8.1" data-path="plotting-treats-results.html"><a href="plotting-treats-results.html#d-version"><i class="fa fa-check"></i><b>8.1</b> 3D version!</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="specific-examples.html"><a href="specific-examples.html"><i class="fa fa-check"></i><b>9</b> Specific examples</a>
<ul>
<li class="chapter" data-level="9.1" data-path="specific-examples.html"><a href="specific-examples.html#EGrandom_ext"><i class="fa fa-check"></i><b>9.1</b> Random mass extinction after some time</a></li>
<li class="chapter" data-level="9.2" data-path="specific-examples.html"><a href="specific-examples.html#EGneg_ext"><i class="fa fa-check"></i><b>9.2</b> Species with negative trait values go extinct after some time</a></li>
<li class="chapter" data-level="9.3" data-path="specific-examples.html"><a href="specific-examples.html#EGbg_ext"><i class="fa fa-check"></i><b>9.3</b> Adding a background extinction after reaching a number of living taxa</a></li>
<li class="chapter" data-level="9.4" data-path="specific-examples.html"><a href="specific-examples.html#EGred_spec"><i class="fa fa-check"></i><b>9.4</b> Reducing speciation rate after some time</a></li>
<li class="chapter" data-level="9.5" data-path="specific-examples.html"><a href="specific-examples.html#EG_change_trait"><i class="fa fa-check"></i><b>9.5</b> Changing the trait process after some time</a></li>
<li class="chapter" data-level="9.6" data-path="specific-examples.html"><a href="specific-examples.html#EG_change_correlation"><i class="fa fa-check"></i><b>9.6</b> Changing trait correlation after reaching a trait value</a></li>
<li class="chapter" data-level="9.7" data-path="specific-examples.html"><a href="specific-examples.html#EG_change_modif"><i class="fa fa-check"></i><b>9.7</b> Event for changing a modifier: speciation event increase for species with negative values</a></li>
<li class="chapter" data-level="9.8" data-path="specific-examples.html"><a href="specific-examples.html#EG_modify_brlen"><i class="fa fa-check"></i><b>9.8</b> Changing branch length when reaching n taxa</a></li>
<li class="chapter" data-level="9.9" data-path="specific-examples.html"><a href="specific-examples.html#EG_founding_purebirth"><i class="fa fa-check"></i><b>9.9</b> Founding event: a generating a subtree with no fossils</a></li>
<li class="chapter" data-level="9.10" data-path="specific-examples.html"><a href="specific-examples.html#EG_founding_traits"><i class="fa fa-check"></i><b>9.10</b> Founding event: a generating a subtree a different process</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/TGuillerme/treats/" target="blank">Project GitHub page</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Specific examples</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Specific examples</h1>
<p class="author"><em>Thomas Guillerme (<a href="mailto:guillert@tcd.ie" class="email">guillert@tcd.ie</a>)</em></p>
<p class="date"><em>2023-03-27</em></p>
</div>
<div id="treats-disparity-and-diversity-simulations." class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">1</span> <code>treats</code>: disparity and diversity simulations.<a href="index.html#treats-disparity-and-diversity-simulations." class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Allowing to simulate disparity and diversity at the same time with interaction between both.</p>
<p>The core of this package is based on the <a href="https://github.com/cran/diversitree/blob/master/R/simulate-bd.R"><code>diversitree</code> birth-death algorithm</a>.</p>
<div id="what-is-treats" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> What is <code>treats</code>?<a href="index.html#what-is-treats" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are some very good packages out there to simulate birth death trees (like <a href="https://github.com/tanja819/TreeSim">TreeSim</a>) or even packages simulating traits (disparity) and diversity jointly (like <a href="https://github.com/cran/RPANDA">RPANDA</a> or <a href="https://github.com/PuttickMacroevolution/PETER">PETER</a>).
We strongly advice you have a look at these packages first as they might be more appropriate for your tasks.</p>
<p><code>treats</code> aims to be a highly modular and friendly version of all these packages: it allows to simulate disparity and diversity jointly with a vast array of options that can be easily modified by users.
For example, you can easily generate any type of process to generate a trait (BM, OU, something else, etc…) in multiple dependent or independent dimensions through <code>"traits"</code> objects.
You can then specify how the traits should affect disparity through <code>"modifiers"</code> objects. And finally you can create events (like mass extinctions) through <code>"events"</code> objects.
These objects and how to modify them will be detailed throughout this manual.
Finally we are putting an emphasise in the development of this package on the speed and reliability of the functions.</p>
<div id="modular" class="section level3 hasAnchor" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Modular?<a href="index.html#modular" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Because their is an infinite way you might want to generate disparity and diversity (different traits, different modifiers and different events), the <code>treats</code> package is designed to make all these parts easy to code separately and integrate them easily in the <code>treats</code> core functions.
This allows you to simulate finely tuned multidimensional data for your specific project!</p>
</div>
</div>
<div id="who-is-this-manual-for" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Who is this manual for?<a href="index.html#who-is-this-manual-for" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This manual explains how <code>treats</code> work in as much details as possible and aims to give you the keys to design your own diversity and disparity simulations.</p>
<p>The first section <code>Getting started</code> is aimed for people with a <code>R</code> beginner level:
* you know what a package is - and how to install it;
* you know what a function is - and what arguments are;
* you have already (vaguely) heard that they are different types of objects in R - like matrices (<code>"matrix"</code>) or trees (<code>"phylo"</code>);
* and you have already looked for documentation and bugs online.</p>
<p>The sections after that are a bit more advanced and requires the following level:
* you have already created functions before;
* you know how to subset elements of a list - i.e. you understand the <code>list$element</code> syntax;
* you are aware that both <code>TRUE == 1</code> and <code>FALSE == 0</code> are <code>TRUE</code>;
* you have heard that the objects in R have classes and that it sometimes matters - for example you know that R can differentiate between <code>as.numeric(1)</code> and <code>as.integer(1)</code>;
* you owe part of your life to Stack Overflow.</p>
</div>
<div id="installing-and-running-the-package" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Installing and running the package<a href="index.html#installing-and-running-the-package" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You can install this package easily, directly from the github:
<!-- TG: I do intend to release it on CRAN later on --></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="index.html#cb1-1" aria-hidden="true"></a><span class="co">## Checking if devtools is already installed</span></span>
<span id="cb1-2"><a href="index.html#cb1-2" aria-hidden="true"></a><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(devtools)) <span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb1-3"><a href="index.html#cb1-3" aria-hidden="true"></a></span>
<span id="cb1-4"><a href="index.html#cb1-4" aria-hidden="true"></a><span class="co">## Installing the latest version directly from GitHub</span></span>
<span id="cb1-5"><a href="index.html#cb1-5" aria-hidden="true"></a>devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;TGuillerme/treats&quot;</span>)</span></code></pre></div>
</div>
<div id="help" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Help<a href="index.html#help" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If you need help with the package, hopefully the following manual will be useful.
However, parts of this package are still in development and some other parts are probably not covered.
Thus if you have suggestions or comments on on what has already been developed or will be developed, please send me an email (<a href="mailto:guillert@tcd.ie" class="email">guillert@tcd.ie</a>) or if you are a GitHub user, directly create an issue on the <a href="https://github.com/TGuillerme/treats">GitHub page</a>.
Doing so will not only hopefully help you but also other users since it will help improve this manual!</p>
</div>
<div id="how-does-treats-work" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> How does <code>treats</code> work?<a href="index.html#how-does-treats-work" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Basically, the <code>treats</code> function intakes your personalised <code>traits</code>, <code>modifiers</code> and <code>events</code> to generate your disparity and diversity.
You will find more details about how these objects (<code>traits</code>, <code>modifiers</code> and <code>events</code>) work in the rest of the tutorial but here is a graphical representation of how <code>treats</code> work:</p>
<div class="figure">
<img src="treats_structure.png" alt="" />
<p class="caption">Schematised summary of the <code>treats</code> package architecture</p>
</div>
</div>
<div id="bdalgorithm" class="section level2 hasAnchor" number="1.6">
<h2><span class="header-section-number">1.6</span> The birth-death algorithm<a href="index.html#bdalgorithm" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>If you want to get your hands dirty, you can go straight to the <a href="gettingstarted.html#gettingstarted">getting start section</a>, this following section just describes the process in pseudo-code.</p>
</blockquote>
<p>The <code>treats</code> algorithm is based on a modular version of the birth-death process algorithm.
The birth-death model is a continuous Markov process (i.e. a continuous random process where the state will change each step are linked through time and change according to some random exponential variables) which is well defined mathematically and <a href="https://lukejharmon.github.io/pcm/chapter10_birthdeath/#section-10.2-the-birth-death-model">commonly used in biology</a> but also in <a href="https://en.wikipedia.org/wiki/Birth%E2%80%93death_process">many other fields</a>.</p>
<p>The algorithm used in <code>treats</code> allows modularity of this process and is based on the following steps (the text in <code>courier font</code> is for the name of the process in the algorithm):</p>
<ol start="0" style="list-style-type: decimal">
<li><strong>Starting the process</strong>: this step is actually non modular and creates a random tree with one tip, one node and one branch length connecting both. This step is used to optimise the rest of the algorithm in terms of speed and memory management. The node, tip and branch resulting from this step are discarded at the end of the simulations.</li>
<li><strong>Selecting a lineage</strong> (<code>selecting</code>): this step selects a tip that is currently not extinct. In a standard birth-death process this is just done randomly, however in <code>treats</code> this can be modified based on the birth-death parameters, the currently available lineages and potential trait values. <em>For example, it is possible to put a higher probability in selecting a lineage that is next to a lineage that recently went extinct and has a positive trait value.</em>
Then go to step 2.</li>
<li><strong>Growing the tree</strong> (<code>waiting</code>): this step grows the tree by a certain amount. It does so by adding the same amount of branch length to all the non-extinct lineages. In an exact birth death process, this is done by drawing a random value from an exponential distribution with a rate of <span class="math display">\[\text{number of living lineages} \times (\text{speciation} + \text{extinction parameters})\]</span>. In <code>treats</code>, this can be modified based on the birth-death parameters, the currently available lineages and potential trait values. <em>For example, it is possible to increase branch length by the ratio of living/extinct fossils and a random number drawn from the range of current trait values.</em>
If the total tree length is less than the required tree length, go to step 3. Else go to step 6.</li>
<li><strong>Simulating traits</strong> [optional](<code>traits</code>): this step allows to simulate a trait value for the selected lineage from step 1. This is typically not part of a standard birth-death process and is handled via the <code>traits</code> option in <code>treats</code> (see the <a href="maketraits.html#maketraits"><code>make.traits</code></a> chapter for more details).
Then go to step 4.</li>
<li><strong>Speciating</strong> (<code>speciating</code>): in this step, the selected lineage from step 1 has the option of speciating or going extinct. In a standard birth-death process, this happens by randomly drawing a value between 0 and 1 as a way to trigger speciation relatively to the birth-death parameters:</li>
</ol>
<pre><code>if
    randomly drawn number is smaller or equal to speciation/(speciation + extinction)
then
    do speciate
else
    go extinct</code></pre>
<p>Again, in <code>treats</code>, this process can be modified based on the birth-death parameters, the currently available lineages and potential trait values. <em>For example, the lineage can only speciate if it’s trait value is positive, regardless of whether speciation or extinction has been triggered</em>.
Then go to step 5.
5. If the number of lineages is less than required number of lineages, then go to step 1. Else go to step 6.
6. The simulation has stopped because it reached the required amount of lineages or time.</p>

<pre><code>## Loading required package: dispRity</code></pre>
</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="gettingstarted.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/TGuillerme/treats/inst/gitbook/edit/master/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
